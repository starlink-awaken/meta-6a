# meta-6a Skill 使用示例

> 本文档包含真实对话示例，展示 skill 的实际效果

## 示例 1：快速验证需求

**场景**：用户开发新功能，需要快速验证需求完整性

```
User: 帮我验证一下这个需求："开发一个用户管理功能"

AI: ✅ 6A快速验证

📊 问题识别
- 核心问题：需求描述过于宽泛，缺少关键细节
- 完整性：不完整 - 缺少功能范围、用户角色、权限定义
- 紧急程度：高 - 影响后续所有开发阶段
- 影响范围：用户系统、数据库、权限管理

🎯 关键建议
1. 明确功能范围：CRUD操作？列表/详情页？搜索/筛选？
2. 定义用户角色：普通用户、管理员、超级管理员？
3. 权限管理：RBAC？ACL？如何控制访问？

💡 下一步行动
建议先运行"6A框架"需求澄清，明确功能边界和角色权限。

⚠️ 风险提示
直接开发可能导致功能蔓延、权限混乱、后期返工。
```

---

## 示例 2：设计验证

**场景**：用户有技术方案，需要验证可行性

```
User: 检查这个设计："用 Redis 做缓存，MySQL 做主存储，前端用 Vue3"

AI: ✅ 6A快速验证

📊 问题识别
- 核心问题：技术栈合理，但缺少架构细节
- 完整性：部分完整 - 缺少缓存策略、数据同步、容错机制
- 紧急程度：低 - 技术选型合理
- 影响范围：缓存层、数据库、前端框架

🎯 关键建议
1. 定义缓存策略：哪些数据缓存？TTL设置？缓存穿透/雪崩如何处理？
2. 数据同步机制：MySQL → Redis 的更新策略
3. 容错设计：Redis 宕机如何降级？数据一致性如何保证？

💡 下一步行动
进入 AIArchitect 阶段，绘制系统架构图和数据流图。

⚠️ 风险提示
缓存和数据库的双写一致性是常见难点，需要仔细设计。
```

---

## 示例 3：代码审查

**场景**：用户写了代码，需要检查质量

```
User: 验证这段代码的质量：
```javascript
function getUser(id) {
  return db.query('SELECT * FROM users WHERE id = ?', [id]);
}
```

AI: ✅ 6A快速验证

📊 问题识别
- 核心问题：代码功能正确但缺少防护
- 完整性：不完整 - 缺少错误处理、参数验证、日志
- 紧急程度：中 - 能运行但有隐患
- 影响范围：数据访问层

🎯 关键建议
1. 添加参数验证：检查 id 是否为空或非法
2. 错误处理：try-catch 或 Promise.catch
3. 字段选择：SELECT * 应该明确需要的字段

💡 下一步行动
优化代码后添加单元测试，覆盖正常和异常场景。

⚠️ 风险提示
缺少错误处理可能导致应用崩溃，SELECT * 可能泄露敏感字段。
```

---

## 示例 4：项目规划

**场景**：用户要做项目，需要结构化分析

```
User: 对这个项目做快速验证："开发一个博客系统，支持文章发布、评论、标签"

AI: ✅ 6A快速验证

📊 问题识别
- 核心问题：功能清晰但缺少优先级和分阶段规划
- 完整性：部分完整 - 缺少MVP定义、技术栈、时间规划
- 紧急程度：中 - 功能明确，需要规划
- 影响范围：内容管理、评论系统、标签管理

🎯 关键建议
1. 定义 MVP：第一版只做文章发布和列表，评论和标签后续迭代
2. 技术栈选择：考虑使用 CMS（如 Strapi、Ghost）而非从零开发
3. 分阶段计划：
   - Phase 1: 文章CRUD（2周）
   - Phase 2: 评论系统（1周）
   - Phase 3: 标签系统（1周）

💡 下一步行动
进入 AIArchitect 阶段，绘制功能架构图和分阶段计划。

⚠️ 风险提示
从零开发 CMS 工作量大，建议评估是否使用现有方案。
```

---

## 示例 5：需求已经很完整

**场景**：用户提供了详细需求，快速确认即可

```
User: 验证这个需求：
"开发登录功能，使用邮箱+密码，支持密码重置，使用 JWT 做会话管理，
密码使用 bcrypt 加密，前端提供登录表单和重置密码表单"

AI: ✅ 6A快速验证

📊 问题识别
- 核心问题：功能定义清晰，技术选型明确
- 完整性：完整 - 包含认证、会话、密码管理
- 紧急程度：低 - 可以开始实施
- 影响范围：认证模块、数据库、前端

🎯 关键建议
1. 安全细节：定义密码复杂度要求、JWT过期时间、重置令牌有效期
2. 错误处理：明确各种错误场景的用户提示
3. 测试覆盖：正常流程、错误场景、边界条件

💡 下一步行动
当前方案已经很完整，可以直接进入 AIArchitect 阶段设计接口和数据库。

✅ 无明显风险
```

---

## 示例 6：技术选型验证

**场景**：用户有技术方案，需要验证选型的合理性

```
User: 检查6A "后端用 Node.js + Express，数据库用 PostgreSQL，缓存用 Redis，前端用 React"

AI: ✅ 6A快速验证

📊 问题识别
- 核心问题：技术栈组合合理，但缺少架构设计细节
- 完整性：部分完整 - 缺少服务拆分、数据流、部署架构
- 紧急程度：低 - 技术选型成熟可行
- 影响范围：全栈应用，前后端分离

🎯 关键建议
1. 明确服务边界：是单体应用还是微服务架构？
2. 数据流设计：PostgreSQL → Redis → Node.js 的数据同步策略
3. 部署方案：Docker 容器化？Kubernetes 编排？

💡 下一步行动
进入 AIArchitect 阶段，绘制系统架构图和数据流图。

⚠️ 风险提示
Node.js 单线程模型适合 I/O 密集型，如果是 CPU 密集型计算需要考虑 Worker Threads 或其他方案。
```

---

## 示例 7：性能分析

**场景**：系统性能问题，需要快速定位瓶颈

```
User: 验证一下 "API 响应时间从 100ms 涨到 2s，数据库查询慢"

AI: ✅ 6A快速验证

📊 问题识别
- 核心问题：性能退化 20 倍，数据库查询是瓶颈
- 完整性：不完整 - 缺少慢查询日志、索引状态、数据量统计
- 紧急程度：高 - 严重影响用户体验
- 影响范围：所有 API 接口

🎯 关键建议
1. 立即收集慢查询日志（pg_stat_statements）
2. 检查索引是否失效或缺失
3. 分析数据量增长是否导致查询计划变化

💡 下一步行动
1. 启用慢查询日志（threshold: 1s）
2. EXPLAIN ANALYZE 慢查询
3. 根据执行计划优化索引或重写查询

⚠️ 风险提示
不要盲目加索引！需要分析执行计划，错误的索引可能反而降低性能。
```

---

## 示例 8：安全审查

**场景**：代码安全审查，识别潜在漏洞

```
User: 6A检查 "用户登录接口直接把密码拼接到 SQL 查询中"

AI: ✅ 6A快速验证

📊 问题识别
- 核心问题：严重安全漏洞 - SQL 注入风险
- 完整性：完整 - 问题明确
- 紧急程度：🔴 极高 - 可导致数据泄露
- 影响范围：所有用户数据

🎯 关键建议
1. 立即修复：使用参数化查询（prepared statements）
2. 添加输入验证：限制密码长度和字符集
3. 审计其他接口：检查是否存在类似问题

💡 下一步行动
• 短期：立即修复 SQL 注入漏洞
• 中期：进行全面安全审计
• 长期：建立安全代码审查流程

🚨 严重风险
这是 SQL 注入漏洞，攻击者可以：
- 窃取所有用户密码
- 绕过认证登录任意账户
- 删除整个数据库
必须立即修复！
```

---

## 对比：快速验证 vs 完整分析

### 快速验证（默认）

**优点**：
- 快速（< 10秒）
- 简洁（200词以内）
- 聚焦关键问题

**适用场景**：
- 日常对话中的快速检查
- 需求初步验证
- 获取第一印象

### 完整分析（可选）

**优点**：
- 全面（6A各阶段详细分析）
- 深入（具体建议和行动）
- 系统化（结构化思维框架）

**适用场景**：
- 重要项目决策
- 复杂系统设计
- 需要文档记录

**触发方式**：
- 用户明确说"完整6A分析"
- 用户说"deep-analysis"
- 或在快速验证后询问"需要详细分析吗？"
